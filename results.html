<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>ðŸ“‹ Ergebnisse</title>
  <style>
    body { background:#fff8e1; font-family:'Comic Sans MS',sans-serif; max-width:800px; margin:2rem auto; padding:1rem; color:#5d4037; }
    h1 { text-align:center; color:#bf360c; font-size:2rem; margin-bottom:1rem; }
    #adminBtn { width:100%; padding:.8rem; background:#33691e; color:white; border:none; border-radius:8px; cursor:pointer; margin-bottom:.5rem; }
    table { width:100%; border-collapse:collapse; }
    th, td { border:2px dashed #bf360c; padding:.5rem; text-align:left; }
    th { background:#ffe0b2; }
    button.del { display:inline-block; margin-left:.5rem; }
  </style>
</head>
<body>
  <h1>ðŸ“‹ Ergebnisse</h1>
  <button id="adminBtn">Admin: EintrÃ¤ge verwalten</button>
  <table>
    <thead><tr><th>Name</th><th>Zeit</th><th>Aktion</th></tr></thead>
    <tbody id="results"></tbody>
  </table>

  <script>
    const PASSWORD = 'StreetfighterV2!';
    let scores = JSON.parse(localStorage.getItem('duelken_scores')||'[]');
    const tbody = document.getElementById('results');

    function render(admin=false) {
      tbody.innerHTML = '';
      scores.forEach((e,i)=>{
        const tr = document.createElement('tr');
        const del = admin
          ? `<button class="del" data-i="${i}">LÃ¶schen</button>`
          : '';
        tr.innerHTML = `<td>${e.name}</td><td>${e.time}</td><td>${del}</td>`;
        tbody.appendChild(tr);
      });
      if (admin) {
        tbody.querySelectorAll('button.del').forEach(btn=>{
          btn.onclick = () => {
            scores.splice(btn.dataset.i,1);
            localStorage.setItem('duelken_scores', JSON.stringify(scores));
            render(true);
          };
        });
      }
    }

    document.getElementById('adminBtn').onclick = () => {
      const p = prompt('Admin-Passwort:');
      if (p === PASSWORD) {
        render(true);
      } else {
        alert('Falsches Passwort!');
      }
    };

    // initial
    render(false);
  </script>
</body>
</html>
